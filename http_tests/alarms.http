@api = http://localhost:3000/api
@business_uuid_tech_corp = 1a2b3c4d-5e6f-4a7b-8c9d-0e1f2a3b4c5d
@business_uuid_innovate_llc = 2b3c4d5e-6f7a-4b8c-9d0e-1f2a3b4c5d6e
@alarm_uuid_tech_corp = 11111111-1111-1111-1111-111111111111
@channel_uuid_tech_corp = c3d4e5f6-a7b8-9012-3456-7890abcdef12

###
# Owner Login (John Doe)
# @name ownerLogin
POST {{api}}/auth/login
Content-Type: application/json

{
  "dni": "28470359",
  "password": "Password1234"
}

###
# Admin Login (Jane Smith)
# @name adminLogin
POST {{api}}/auth/login
Content-Type: application/json

{
  "dni": "28470361",
  "password": "Password1234"
}

###
# Technician Login (Mike Matei)
# @name technicianLogin
POST {{api}}/auth/login
Content-Type: application/json

{
  "dni": "28470350",
  "password": "1298"
}

###
# Get all alarms as Owner
GET {{api}}/alarms
Authorization: Bearer {{ownerLogin.response.body.token}}
business-uuid: {{business_uuid_tech_corp}}

###
# Get all alarms as Admin
GET {{api}}/alarms
Authorization: Bearer {{adminLogin.response.body.token}}
business-uuid: {{business_uuid_innovate_llc}}

###
# Get all alarms as Technician
GET {{api}}/alarms
Authorization: Bearer {{technicianLogin.response.body.token}}
business-uuid: {{business_uuid_innovate_llc}}

###
# Get alarm by UUID as Owner
GET {{api}}/alarms/{{alarm_uuid_tech_corp}}
Authorization: Bearer {{ownerLogin.response.body.token}}
business-uuid: {{business_uuid_tech_corp}}

###
# Create a new alarm as Owner
POST {{api}}/alarms
Authorization: Bearer {{ownerLogin.response.body.token}}
business-uuid: {{business_uuid_tech_corp}}
Content-Type: application/json

{
    "channel_uuid": "{{channel_uuid_tech_corp}}",
    "name": "New Test Alarm",
    "description": "A test alarm created by the owner.",
    "time_range": 300,
    "condition_logic": "value > 50",
    "condition_show": "Value > 50",
    "alarm_type": "upper_threshold",
    "var01": 50
}

###
# Update an alarm as Owner
PUT {{api}}/alarms/{{alarm_uuid_tech_corp}}
Authorization: Bearer {{ownerLogin.response.body.token}}
business-uuid: {{business_uuid_tech_corp}}
Content-Type: application/json

{
    "name": "Updated High Temperature Alert"
}

###
# Delete an alarm as Owner
DELETE {{api}}/alarms/{{alarm_uuid_tech_corp}}
Authorization: Bearer {{ownerLogin.response.body.token}}
business-uuid: {{business_uuid_tech_corp}}
