@api = http://localhost:5000/api
@token = 

###
# Auth endpoints
###

# Login user 
# Examples dni: 28470359 password: Password1234 Owner - All actions in all bussiness
#          dni: 12345677 password: Password1232 Administrator in 'Tech Corp', UUID: 1a2b3c4d-5e6f-4a7b-8c9d-0e1f2a3b4c5d       
# @name login
POST {{api}}/auth/login
Content-Type: application/json

{
  "dni": "28470359",
  "password": "Password1234"
}

###
@token = {{login.response.body.token}}

###
# User endpoints
###

# Create a new user
POST {{api}}/users
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "firstName": "juan",
  "lastName": "perez",
  "email": "juand5.perez.unique@example.com",
  "password": "Password1232",
  "phone": "1234567890",
  "dni": "12345659",
  "street": "123 Main St",
  "city": "Anytown",
  "state": "Anystate",
  "country": "USA",
  "zipCode": "12345",
  "business_uuid": "1a2b3c4d-5e6f-4a7b-8c9d-0e1f2a3b4c5d",
  "role": "Technician"
}

###

# Get all users
GET {{api}}/users
Authorization: Bearer {{token}}

###

# Get user by ID
# 69328825-b615-4e13-a627-ee2f7e75600c   
GET {{api}}/users/8fe3ca3d-0a97-44a3-9934-f93c6d825c44
Authorization: Bearer {{token}}

###

# Update user
PUT {{api}}/users/a1b2c3d4-e5f6-4a7b-8c9d-0e1f2a3b4c5d
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "phone": "0987654321",
  "street": "456 Oak Ave",
  "city": "Somecity"
}

###

# Update user image
# Note: Create a test.jpg file in the root directory for this to work.
PUT {{api}}/users/a1b2c3d4-e5f6-4a7b-8c9d-0e1f2a3b4c5d
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Authorization: Bearer {{token}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test.jpg"
Content-Type: image/jpeg

< ./test.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

# Delete user
DELETE {{api}}/users/292feb8e-794b-11f0-b2d2-f407443f6f70
Authorization: Bearer {{token}}

###
# Business endpoints
###

# Create a new business
POST {{api}}/businesses
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Test Business Inc.",
  "description": "A test business for the API.",
  "email": "business.unique@example.com",
  "phone": "123456789",
  "street": "789 Business Rd",
  "city": "Businesstown",
  "state": "Businessland",
  "country": "BUSA",
  "zip_code": "54321"
}

###

# Get all businesses
GET {{api}}/businesses
Authorization: Bearer {{token}}

###

# Get business by ID
GET {{api}}/businesses/c3d4e5f6-a7b8-4c9d-0e1f-2a3b4c5d6e7f
Authorization: Bearer {{token}}

###

# Update business
PUT {{api}}/businesses/c3d4e5f6-a7b8-4c9d-0e1f-2a3b4c5d6e7f
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "phone": "987654321",
  "description": "An updated test business description."
}

###

# Update business image
# Note: Create a test.jpg file in the root directory for this to work.
PUT {{api}}/businesses/c3d4e5f6-a7b8-4c9d-0e1f-2a3b4c5d6e7f
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Authorization: Bearer {{token}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test.jpg"
Content-Type: image/jpeg

< ./test.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

# Delete business
DELETE {{api}}/businesses/c3d4e5f6-a7b8-4c9d-0e1f-2a3b4c5d6e7f
Authorization: Bearer {{token}}
